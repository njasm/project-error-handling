<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>{{GROUP_NAME}} {{GROUP_TYPE}} Group</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html">Welcome</a></li><li class="chapter-item expanded "><a href="CHARTER.html">Charter</a></li><li class="chapter-item expanded "><a href="meetings/index.html">Meetings</a></li><li class="chapter-item expanded "><a href="draft-rfcs/index.html">Draft RFCs</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">{{GROUP_NAME}} {{GROUP_TYPE}} Group</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/rust-lang/{{GROUP_SLUG}}" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#error-handling-project-group" id="error-handling-project-group">Error Handling Project Group</a></h1>
<p>Welcome to the repository for the Error Handling Project Group! We're focused on defining and communicating Rust's error handling story.</p>
<p>This is the repository we use to organise our work. Please refer to our <a href="./CHARTER.html">charter</a> for more information on our goals and
current scope.</p>
<ul>
<li>Shepherds:
<ul>
<li><a href="https://github.com/yaahc">Jane Lusby (yaahc)</a></li>
<li><a href="https://github.com/seanchen1991">Sean Chen (seanchen1991)</a></li>
</ul>
</li>
<li>Rust library team contact:
<ul>
<li><a href="https://github.com/KodrAus">Ashley Mannix (KodrAus)</a></li>
</ul>
</li>
<li>Advisors:
<ul>
<li><a href="https://github.com/burntsushi">Andrew Gallant (BurntSushi)</a></li>
</ul>
</li>
</ul>
<h2><a class="header" href="#how-can-i-get-involved" id="how-can-i-get-involved">How Can I Get Involved?</a></h2>
<p>Participation in this project group is open to all. You can see our work in
progress via our <a href="../../issues">open issues</a> on this repository and you can participate in
discussions via our <a href="https://rust-lang.zulipchat.com/#narrow/stream/257204-project-error-handling">Zulip stream</a>. We primarily coordinate via 
our meetings, which are tracked <a href="https://doodle.com/poll/fkmvqvpq6eu68igi">here</a>. If you're 
interested in attending our meetings but can't due to a schedule conflist
please let us know on the <a href="../../issues/2">scheduling issue</a> so we can best accommodate everyone.</p>
<h1><a class="header" href="#charter" id="charter">Charter</a></h1>
<h2><a class="header" href="#goals" id="goals">Goals</a></h2>
<h3><a class="header" href="#agree-on-and-define-common-error-handling-terminology" id="agree-on-and-define-common-error-handling-terminology">Agree on and define common error handling terminology</a></h3>
<ul>
<li>Recoverable error: An error that can be reacted and recovered from when encountered e.g. a missing file.</li>
<li>Unrecoverable error: An error that cannot reasonably be reacted to or recovered from and which indicates a bug e.g. indexing out of bounds.</li>
<li>Error Type: A type that represents a recoverable error. Error types can optionally implement the <code>Error</code> trait so that it can be reported to the user or be converted into a trait object.</li>
<li>Reporting Type: A type that can store all recoverable errors an application may need to propagate and print them as error reports.
<ul>
<li>Reporting types can represent the recoverable errors either via concrete types, likely parameterized, or trait objects.</li>
<li>Reporting types often bundle context with errors when they are constructed, e.g. <code>Backtrace</code>.</li>
<li>Reporting types often provide helper functions for creating ad hoc errors whose only purpose is to be reported e.g. <code>anyhow::format_err!</code> or <code>eyre::WrapErr</code>.</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#come-to-a-consensus-on-current-best-practices" id="come-to-a-consensus-on-current-best-practices">Come to a consensus on current best practices</a></h3>
<p>Here is a tentative starting point, subject to change:</p>
<ul>
<li>Use <code>Result</code> and <code>Error</code> types for recoverable errors.</li>
<li>Use <code>panic</code> for unrecoverable errors.</li>
<li>Implement <code>Error</code> for error types that may need to be reported to a human or be composed with other errors.</li>
<li>Use enums for types representing multiple failure cases that may need to be handled.
<ul>
<li>For libraries, oftentimes you want to support both reporting and handling so you implement <code>Error</code> on a possibly non-exhaustive enum.</li>
</ul>
</li>
<li>Error kind pattern for associating context with every enum variant without including the member in every enum variant.</li>
<li>Convert to a reporting type when the error is no longer expected to be handled beyond reporting e.g. <code>anyhow::Error</code> or <code>eyre::Report</code> or when trait object + downcast error handling is preferable.</li>
<li>Recommend <code>Box</code>ing concrete error types when stack size is an issue rather than <code>Box</code>ing and converting to <code>dyn Error</code>s.</li>
<li>What is the consensus on handling <code>dyn Error</code>s? Should it be encouraged or discouraged? Should we look into making <code>Box&lt;dyn Error...&gt;</code> implement <code>Error</code>?</li>
</ul>
<h3><a class="header" href="#identify-pain-points-in-error-handling-today" id="identify-pain-points-in-error-handling-today">Identify pain points in error handling today</a></h3>
<ul>
<li>Backtrace capture is expensive, but without it can be difficult to pinpoint the origin of errors</li>
<li>unwrapping errors without first converting to a reporting type will often discard relevant information</li>
<li>errors printed from <code>main</code> have to assume a prefixed <code>Error: </code>, sub-par control of output format when printing during termination.</li>
<li>The <code>Error</code> trait only exposes three forms of context, can only represent singly-linked lists for chains of errors</li>
</ul>
<h3><a class="header" href="#communicate-current-best-practices" id="communicate-current-best-practices">Communicate current best practices</a></h3>
<ul>
<li>Document the consensus.</li>
<li>Communicate plan for future changes to error handling, and the libraries that future changes are being based off of.</li>
<li>Produce learning resources related to current best practices.
<ul>
<li>New chapters in the book?</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#evaluate-options-for-error-reporting-type-aka-better-boxdyn-error" id="evaluate-options-for-error-reporting-type-aka-better-boxdyn-error">Evaluate options for error reporting type a.k.a. better <code>Box&lt;dyn Error&gt;</code></a></h3>
<ul>
<li>Survey the current libraries in the ecosystem:
<ul>
<li><code>anyhow</code></li>
<li><code>eyre</code></li>
</ul>
</li>
<li>Evaluate value of features including:
<ul>
<li>Single word width on stack</li>
<li>Error wrapping with display types and with special downcast support.</li>
<li>Report hook and configurable <code>dyn ReportHandler</code> type for custom report formats and content, similar to panic handler but for errors.</li>
<li><code>#[no_std]</code> support</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#consolidate-ecosystem-by-merging-best-practice-crates-into-std" id="consolidate-ecosystem-by-merging-best-practice-crates-into-std">Consolidate ecosystem by merging best practice crates into std</a></h3>
<ul>
<li>Provide a derive macro for <code>Error</code> in std.</li>
<li>Stabilize the <code>Backtrace</code> type but possibly not <code>fn backtrace</code> on the <code>Error</code> trait.
<ul>
<li>Provide necessary API on <code>Backtrace</code> to support crates like <code>color-backtrace</code>.</li>
</ul>
</li>
<li>Move <code>Error</code> to core.
<ul>
<li>Depends on generic member access.</li>
<li>Requires resolving downcast dependency on <code>Box</code> and blocking the stabilization of <code>fn backtrace</code>.</li>
</ul>
</li>
<li>Potentially stabilize an error reporting type based on <code>anyhow</code> and <code>eyre</code> now that they're close to having identical feature sets.</li>
</ul>
<h3><a class="header" href="#add-missing-features" id="add-missing-features">Add missing features</a></h3>
<ul>
<li>Generic member access on the <code>Error</code> trait.</li>
<li><code>Error</code> return traces:
<ul>
<li>Depends on specialization and generic member access.</li>
</ul>
</li>
<li>Fix rough corners around reporting errors and <code>Termination</code>.</li>
</ul>
<h2><a class="header" href="#non-goals" id="non-goals">Non Goals</a></h2>
<ul>
<li>This group should not be involved in managing design discussions for the <code>Try</code> trait, <code>try</code> blocks, or <code>try</code> fns.</li>
</ul>
<h2><a class="header" href="#membership-requirements" id="membership-requirements">Membership Requirements</a></h2>
<ul>
<li>Group membership is open, any interested party can participate in discussions, repeat contributors will be added to appropriate teams.</li>
</ul>
<h2><a class="header" href="#additional-questions" id="additional-questions">Additional Questions</a></h2>
<h3><a class="header" href="#what-support-do-you-need-and-separately-want-from-the-rust-organization" id="what-support-do-you-need-and-separately-want-from-the-rust-organization">What support do you need, and separately want, from the Rust organization?</a></h3>
<p>I'm not sure, my main concern is getting prompt feedback on RFCs.</p>
<h3><a class="header" href="#why-should-this-be-a-project-group-over-a-community-effort" id="why-should-this-be-a-project-group-over-a-community-effort">Why should this be a project group over a community effort?</a></h3>
<p>There isn't anything in this project group that can't be handled as a
community effort, but centralizing work into a project group should help
speed things. Error handling is a core aspect of the language and changes in
error handling have large impacts on the ecosystem. Ensuring that efforts to
refine error handling within Rust have sufficient resources and don't stall
out is in the best interests of the community. By organizing efforts as a
project group we will hopefully have an easier time recruiting new members,
getting attention on RFCs from members of the libs team, and using the
established resources and expertise of the rust organization for coordinating
our efforts.</p>
<h3><a class="header" href="#what-do-you-expect-the-relationship-to-the-team-be" id="what-do-you-expect-the-relationship-to-the-team-be">What do you expect the relationship to the team be?</a></h3>
<p>The project group will create RFCs for various changes to the standard library and the team will review them via the standard RFC process.</p>
<h3><a class="header" href="#who-are-the-initial-shepherdsleaders-this-is-preferably-23-individuals-but-not-required" id="who-are-the-initial-shepherdsleaders-this-is-preferably-23-individuals-but-not-required">Who are the initial shepherds/leaders? (This is preferably 2–3 individuals, but not required.)</a></h3>
<p>Jane Lusby(@yaahc), Andrew Gallant(@BurntSushi), and Sean Chen(@seanchen1991).</p>
<h3><a class="header" href="#is-your-group-long-running-or-temporary" id="is-your-group-long-running-or-temporary">Is your group long-running or temporary?</a></h3>
<p>Temporary.</p>
<h3><a class="header" href="#if-it-is-temporary-how-long-do-you-see-it-running-for" id="if-it-is-temporary-how-long-do-you-see-it-running-for">If it is temporary, how long do you see it running for?</a></h3>
<p>This depends pretty heavily on how quickly the RFCs move, anywhere between 6 months and 2 years I'd guess but don't quote me on this.</p>
<h3><a class="header" href="#if-applicable-which-other-groups-or-teams-do-you-expect-to-have-close-contact-with" id="if-applicable-which-other-groups-or-teams-do-you-expect-to-have-close-contact-with">If applicable, which other groups or teams do you expect to have close contact with?</a></h3>
<p>Primarily the libs team, but there may be some small interactions with the lang team, compiler team, and traits working group.</p>
<h3><a class="header" href="#where-do-you-see-your-group-needing-help" id="where-do-you-see-your-group-needing-help">Where do you see your group needing help?</a></h3>
<p>Primarily in drafting RFCs, writing is not this author's strong suit.</p>
<h1><a class="header" href="#meetings" id="meetings">Meetings</a></h1>
<p>This folder contains the minutes of all the recorded meetings that have happened
so far.</p>
<h1><a class="header" href="#rfc-drafts" id="rfc-drafts">RFC drafts</a></h1>
<p>This folder contains drafts of RFCs that the group is preparing to submit.</p>
<!--
Once the group has submitted RFCs, the drafts should be deleted from this folder,
and links to the pull requests on the RFC repository should be listed here.
-->

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
